## MySQL vs PostgreSQL：PostgreSQL 的崛起与 MySQL 的衰落

**1. 大纲：**

#数据库 #PostgreSQL #MySQL #性能对比 #生态系统 #数据库趋势 #开源软件

* **功能特性对比：**
    * PostgreSQL:  扩展性极强，拥有超过 1000 个扩展插件，涵盖向量数据库、OLAP 分析、全文检索、图数据库等众多领域，例如 pgvector，pg_duckdb, pg_mooncake 等，功能丰富，几乎可以替代各种专用组件，正在向多模态数据库发展。
    * MySQL:  新功能乏善可陈，"创新版本"更新缓慢且缺乏亮点，例如 9.3 版本的更新令人失望，向量数据库功能实现简陋，仅企业版支持 JS 存储过程。
* **性能对比：**
    * PostgreSQL:  性能持续提升，尤其写入性能提升显著，在 DuckDB 和列存扩展加持下，分析性能可比肩 ClickHouse。真实场景测试（JuiceFS 元数据引擎）和 Dolt 的对比测试均显示 PostgreSQL 性能优于 MySQL。
    * MySQL:  性能逐版本下降，Percona 和 Mark Callaghan 的测试均显示 MySQL 8.x 性能比 5.7/5.6 下降 20%-40%，OLTP 性能下降明显，分析性能提升有限。
* **质量对比：**
    * PostgreSQL:  正确性高，可串行化快照隔离（SSI）算法性能优秀，在 Jepsen 测试中表现出色，符合 SQL 标准，支持丰富的字符集编码和排序规则。
    * MySQL:  存在严重 bug，例如表数量超过 1 万时重启崩溃。 ACID 正确性存在缺陷，可重复读隔离级别名不副实，与文档承诺不符，可串行化隔离等级性能差。字符集编码和排序规则支持有限。
* **生态对比：**
    * PostgreSQL:  生态繁荣，开发者使用率超过 MySQL，成为 Stack Overflow 最流行数据库。云厂商纷纷押注 PostgreSQL，AWS RDS 上 PostgreSQL 实例数量超过 MySQL，融资主要集中在 PostgreSQL 生态。大型企业和新兴创业公司广泛采用 PostgreSQL。
    * MySQL:  社区凋零，开发者使用率下降，云厂商对其投入减少，融资案例少。Oracle 的不作为和云厂商的白嫖导致 MySQL 发展停滞。


**2. 最有价值的观点：**

* **PostgreSQL 的扩展性是其最大的优势：** 丰富的扩展插件使得 PostgreSQL 不仅仅是一个关系型数据库，而是一个多模态的数据管理平台，可以满足各种数据处理需求，极大降低了技术栈的复杂性。
* **MySQL 的衰落与其所有权结构有关：**  Oracle 的不作为以及云厂商的白嫖行为导致 MySQL 缺乏持续的投入和创新，最终被 PostgreSQL 超越。
* **数据库的正确性至关重要：** MySQL 在正确性上的缺陷，尤其是 ACID 的实现问题，对于对数据完整性要求高的场景是不可接受的，这也是 PostgreSQL 逐渐被更多企业选择的重要原因。

**3. 信息熵：**

* **反常识观点：** MySQL 版本越新，性能反而越差。这与通常软件版本迭代会提升性能的认知相悖。
* **高信息熵：** PostgreSQL 通过扩展插件的方式，正在将整个数据库世界内化其中，成为一个“数据库操作系统”。这个观点揭示了 PostgreSQL 发展的新方向和巨大潜力。


**4. 日常场景中的深度应用：**

* **技术选型：**  对于新项目，PostgreSQL 应该成为首选数据库，其丰富的功能和扩展性可以满足各种需求，避免后期因为功能不足而进行数据库迁移。
* **架构设计：**  利用 PostgreSQL 的扩展性，可以简化系统架构，减少对其他专用组件的依赖，例如可以使用 pgvector 构建向量数据库，使用 pg_duckdb 进行 OLAP 分析。
* **性能优化：**  关注 PostgreSQL 的新版本和新特性，例如新的写入性能优化，可以帮助我们提升系统性能。
* **数据安全：**  对于对数据一致性要求高的场景，应该选择 PostgreSQL 并使用可串行化隔离级别，以确保数据安全。


总而言之，PostgreSQL 的崛起和 MySQL 的衰落反映了数据库技术的演进趋势，PostgreSQL 的扩展性、性能和正确性使其成为未来数据库的重要选择。  虽然 MySQL 曾经辉煌，但面对 PostgreSQL 的挑战，它需要进行根本性的改变才能重新获得竞争力。  一个健康的数据库生态需要良性的竞争，希望 MySQL 能重新焕发活力，与 PostgreSQL 共同推动数据库技术的发展。

