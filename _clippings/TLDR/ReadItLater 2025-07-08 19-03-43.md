好的，这是根据您提供的 YouTube 视频生成的简体中文语音文字稿。

### 介绍

**发言人: Alessio**
大家好，欢迎收听最新一期的 Latent Space 播客。我是 Decible 的合伙人兼首席技术官 Alessio，和我一起的是我的联合主持人，Small AI 的创始人 Swix。

**发言人: Swix**
大家好。

**发言人: Alessio**
今天我们演播室的嘉宾是 Cat Woo 和 Boris Journey，欢迎你们。

**发言人: Boris Journey**
谢谢邀请。

**发言人: Cat Woo**
谢谢。

**发言人: Alessio**
Cat，我们以前就认识了，我刚意识到，从 Dagster 到 Index Ventures，现在又到了 Anthropic。

**发言人: Cat Woo**
没错。

**发言人: Alessio**
看到以前认识的朋友现在在 Anthropic 工作，并且在推出这么酷的产品，真是太棒了。Boris，你现在可是个名人了，因为我们刚才在外面喝咖啡的时候，就有人从你的视频里认出了你。

**发言人: Boris Journey**
哦，哇。这倒是新鲜事。

**发言人: Alessio**
是不是很奇妙？

**发言人: Boris Journey**
是啊，过去几周里我确实有一两次这样的经历。挺让人惊讶的。

**发言人: Alessio**
嗯，感谢你们抽出时间。我们今天来聊聊 Claude Code。大多数人可能都听说过它，我们觉得应该有不少人已经试用过了。但还是让我们先来给它一个清晰的定义吧，Claude Code 到底是什么？

### Claude Code 是什么？

**发言人: Boris Journey**
好的，Claude Code 就是终端里的 Claude。你知道，Claude 有很多不同的交互界面，有桌面版、网页版。而 Claude Code 运行在你的终端里。因为它在终端运行，所以它能接触到很多你在网页版或桌面版上无法获得的东西。比如，它可以运行 bash 命令，可以看到当前目录下的所有文件，并且它能以一种智能体（agentic）的方式来完成所有这些事情。

我想，这可能要追溯到更深层的问题，就是这个想法从何而来。部分原因是我们想了解人们如何使用智能体。我们选择用命令行界面（CLI）这种形式，是因为编程是当今人们使用智能体的一个很自然的场景，这个领域已经有了产品市场契合度。但它其实更像是一个疯狂的研究项目，而且很明显，它现在还比较基础和简单。但总的来说，它就是一个运行在你终端里的智能体。

**发言人: Alessio**
最好的东西都是这么开始的。

### Claude Code 的诞生

**发言人: Alessio**
它是怎么开始的？你们是有一个宏大的计划来构建 Claude Code 吗？

**发言人: Boris Journey**
并没有什么宏大计划。我刚加入 Anthropic 的时候，正在试验各种在不同地方使用模型的方法。我用的是和大家一样的公开 API。其中一个很奇怪的实验就是这个在终端里运行的 Claude。我用它来做一些奇怪的事情，比如查看我正在听什么音乐并对此作出反应，或者截取我的视频播放器画面，解释里面发生了什么。这个东西构建起来很快，玩起来也很有趣。

后来有一次，我给了它访问终端和编写代码的能力，突然之间，它变得非常有用。我自己每天都在用它。之后范围就扩大了，我们给了核心团队使用权限，他们也开始每天都用，这很令人惊讶。然后我们又给了 Anthropic 所有的工程师和研究员使用权限，很快，每个人都开始每天使用它。我记得我们当时有一张内部用户的日活跃用户（DAU）图表，我看着它，连续几天都是垂直上升的。我们意识到，“这里面有东西”，我们必须把它开放给外部用户，让其他人也能试试。这就是它的由来。

### 团队的组建与产品理念

**发言人: Alessio**
那时候你已经和 Boris 一起工作了吗？还是这个工具出来并开始增长后，你才觉得“好吧，我们可能需要组建一个团队”？

**发言人: Cat Woo**
最初的团队是 Boris、Sid 和 Ben。随着越来越多的人开始使用这个工具，我们觉得必须投入资源来支持它，因为我们所有的研究员都在用，这是我们提高他们生产力的一个重要杠杆。那时候，我正在用 Claude Code 来做一些可视化，分析大量数据。有时候，快速启动一个 Streamlit 应用来一次性查看所有汇总统计数据非常有用，而 Claude Code 让这件事变得异常简单。我想我给 Boris 发了一大堆反馈，有一次 Boris 就问我：“你想不想直接来做这个项目？”事情就是这样发生的。

**发言人: Boris Journey**
其实从我这边看，还不止这些。你当时发来了所有这些反馈，与此同时我们正在寻找一位产品经理（PM），也看了几个人。然后我记得我跟经理说：“嘿，我想要 Cat。”

**发言人: Alessio**
我相信大家会好奇，在 Anthropic 内部，一个这样的项目是如何“毕业”的？就是说，你有了快速增长，然后有了一位 PM，你们是在什么时候决定“好了，可以全面开放了”？

**发言人: Cat Woo**
在 Anthropic，我们有一个产品原则，就是“先做最简单的事”（do the simple thing first）。我认为我们构建产品的方式就是基于这个原则。所以你会用尽可能少的人员来配置项目，让事情尽可能保持精简，因为这些限制实际上很有帮助。对于这个项目，我们希望在扩大规模之前看到一些产品市场契合度的迹象。

**发言人: Swix**
我能想象。比如我们这周要发布关于 MCP（模型间通信协议）的播客，我想 MCP 现在也像这样有了一个团队围绕它。它现在已经很正式地成为 Anthropic 的一个产品了。所以我很好奇，对于 Cat 来说，你如何看待为这样一个产品担任 PM？我想你大概是在规划路线图，倾听用户的声音。而且它的迭代速度是我在 Anthropic 从未见过的。

**发言人: Cat Woo**
我认为我的管理风格是“轻触式”的。Boris 和团队本身就是非常强的产品思考者，我们路线图上的绝大多数功能，实际上都是团队成员为了满足自己的需求而构建的。所以很少有自上而下的决策。我觉得我的主要作用是，如果路上有任何障碍，我就去扫清，并确保我们在法律、市场等方面一切就绪。

然后，在非常宏观或长期的路线图方面，整个团队会一起思考，比如，我们认为模型在未来三个月内会擅长做什么？然后我们就确保我们正在构建的东西与模型未来的能力是兼容的。

**发言人: Swix**
我很想深入了解一下“模型在未来三个月内会擅长做什么？”这一点。因为我觉得这是人们在构建 AI 产品时总被告知要思考的问题，但没人知道该如何思考。因为大家只会说“它在全面地变好”、“我们很快就要实现 AGI 了，所以别费劲了”。你们是如何校准三个月的进展的？

**发言人: Cat Woo**
如果你回顾历史，我们倾向于每隔几个月发布一次模型。所以“三个月”只是我随口说的一个数字。我们希望模型的发展方向是能够以尽可能高的自主性完成越来越复杂的任务。这包括确保模型能够探索并找到完成任务所需的信息，确保模型能彻底完成任务的每一个方面，确保模型能有效地组合不同的工具等等。这些是我们关心的方向。

### 技术实现与设计哲学

**发言人: Boris Journey**
是的，回到 Claude Code，这种方法也影响了我们构建它的方式。因为我们知道，如果我们想做一个今天就有广泛产品市场契天花板的产品，我们会去做一个像 Cursor 或 GitHub Copilot 那样的东西。那些都是很棒的产品，很多人每天都在用，我自己也用。但那不是我们想做的产品。我们想做的是一个处在发展曲线更早期的东西，一个随着模型进步，可能在一年或更久之后会成为一个大产品的东西。这就是为什么 Claude Code 运行在终端里，它更原始，你可以直接接触到模型，因为我们没有花时间在上面构建那些花哨的用户界面和脚手架。

**发言人: Alessio**
当谈到围绕模型的“外壳”时，一方面是提示词优化。显然，我每天都用 Cursor，Cursor 在我的提示词之外做了很多优化工作。但我知道你们最近发布了像压缩上下文这样的功能。你们是如何决定在 CLI 之上需要构建多厚的一层，又在什么时候决定某个功能应该成为 Claude Code 的一部分，而不是留给 IDE 的开发者去解决？

**发言人: Boris Journey**
我们可以在三个层面来构建功能。作为一家 AI 公司，最自然的方式就是直接把功能构建到模型里，让模型自己去执行。下一层可能是在模型之上的脚手架，也就是 Claude Code 本身。再往外一层，就是把 Claude Code 作为一个工具，用在更广泛的工作流中。比如，很多人会把 Claude Code 和 tmux 结合使用，来管理多个并行的窗口和会话，我们不需要把这些都内置进来。

像 `compact`（压缩上下文）这个功能，它就必须处在中间层。因为我们希望你在使用 Code 时它就能工作，而不需要你额外引入工具。而以这种方式重写记忆，并不是模型今天能做到的，所以你必须用一个工具来实现。因此它就必须在那个中间层。

我们试了很多不同的压缩方案，比如重写旧的工具调用、截断旧消息而非新消息等等。但最后，我们还是做了最简单的事情：让 Claude 去总结之前的消息，然后返回总结内容，就这么简单。有趣的是，当模型足够好时，最简单的方法通常就行之有效，你不需要过度设计。

**发言人: Swix**
我们在 Claude Plays Pokémon 项目中也这么做，看到这个模式再次出现很有趣。

**发言人: Alessio**
然后你们还有 `claude.md` 文件，用于更由用户驱动的记忆，可以说，这相当于 Cursor 的规则（rules）功能。

**发言人: Boris Journey**
是的，`claude.md` 是“先做最简单的事”这个理念的又一个例子。我们曾有很多关于记忆架构的疯狂想法，这方面有大量的文献和外部产品。我们想从中汲取灵感，但最终我们推出的还是最简单的东西：就是一个文件，里面有些内容，它会自动被读入上下文。现在这个文件有几个版本，你可以把它放在根目录、子目录或你的主目录里，我们会以不同的方式读取所有这些文件。总之，就是最简单可行的方案。

### 灵感来源：与 Aider 的渊源

**发言人: Swix**
我相信你对 Aider 很熟悉，那是我们 Discord 社区里很多人喜爱的另一个工具。当 Claude Code 出来后，同样是这群人也爱上了 Claude Code。对于你从 Aider 中获得的灵感、你们做得不同的地方，或者说你们在设计原则上走了不同道路的地方，你有什么想法吗？

**发言人: Boris Journey**
这其实涉及到我被“AGI 点化”（AGI pilled）的那个时刻。我可以讲讲那个故事。Aider 启发了我们在 Anthropic 内部曾经使用的一个工具，叫做 Clyde。Clyde 就是 CLI Claude 的意思。它是 Claude Code 的前身，是一个研究工具，用 Python 写的，启动要一分钟，非常具有研究员风格，不是一个打磨过的产品。

我刚加入 Anthropic 时，正在提交我的第一个拉取请求（pull request），我是手动写的，因为我不知道有更好的方法。我当时的入职伙伴 Adam Wolf 对我说：“其实，你不用手写，让 Clyde 来写就行了。”我当时想：“好吧，毕竟是在 AI 实验室，可能有什么我不知道的能力吧。”于是我启动了那个终端工具，花了一分钟才启动起来。我跟 Clyde 说：“嘿，这是描述，能帮我创建一个 PR 吗？”它运行了几分钟后，就创建了一个 PR，而且能用。我当时完全被震撼了，因为我完全不知道有工具能做这种事。在加入之前，我以为单行自动补全就是最先进的技术了。那一刻，我被 AGI 点化了。Claude Code 就是从那里来的。所以是的，是 Aider 启发了 Clyde，Clyde 又启发了 Claude Code。所以我非常喜欢 Aider，它是个很棒的产品。

**发言人: Swix**
我想人们会对比较和对比感兴趣。因为对你来说，这显然是你们公司的工具，你也在做这个。但人们想知道如何在各种工具之间做选择。有像 Cursor 这样的，有像 Devin 这样的，有 Aider，还有 Claude Code。我们不可能一次性把所有都试一遍。我的问题是，你把它放在这个选择宇宙的哪个位置？

**发言人: Boris Journey**
你可以让 Claude 来描述所有这些工具，我好奇它会怎么说。

**发言人: Alessio**
完全不会偏袒自己。

**发言人: Boris Journey**
我们内部也使用所有这些工具，我们是所有这些产品的忠实粉丝。Claude Code 显然和其中一些工具有点不同，它更加原始。就像我说的，它没有那种庞大而美观的用户界面，它提供的是对模型最直接的访问，是最原始的。所以，如果你想要一个强大的工具，让你能直接访问模型，用 Claude 来自动化处理大规模工作负载——比如，你有上千个 lint 违规，你想启动一千个 Claude 实例，让它修复每一个问题，然后创建 PR——那么 Claude Code 就是一个非常好的工具。它是一个为高级用户设计、用于处理高强度工作负载的工具。我认为这就是它的定位。

**发言人: Cat Woo**
是的，我们把它看作一个 Unix 工具。就像你组合 `grep`、`cat` 这些命令一样，你也可以把 Claude Code 组合到你的工作流中。

### 成本、效率与投资回报率

**发言人: Alessio**
成本问题很有趣。内部员工需要付费吗？

**发言人: Boris Journey**
如果你在 Anthropic 工作，你可以每天随心所欲地使用它，内部是免费的。

**发言人: Alessio**
我想如果每个人都能免费用，它会变得非常庞大。因为，我想我每个月付给 Cursor 20美元，我在 Cursor 里用了数百万的 token，如果用 Claude Code 会贵得多。所以，我聊过的很多人其实并不理解做这些事情要花多少钱。他们完成一个任务后会说：“哦，这花了我20美分，真不敢相信我付了这么多钱。”回到产品层面，你认为你们有多大责任去让它更高效，还是说“那不是我们这个工具的目标”？

**发言人: Cat Woo**
我们真的把 Claude Code 看作是能从模型中获得最强能力的工具。我们关心成本，因为它与延迟高度相关，我们希望确保这个工具使用起来反应迅速，并且工作彻底。我们希望它产生的每一个 token 都是有意的。我想我们可以在向用户传达成本方面做得更多。目前我们看到每个活跃用户每天的成本大约是6美元，所以一个月下来确实比 Cursor 要高一些，但我不认为这超出了合理范围。我们大致是这样考虑的。

**发言人: Boris Journey**
我想补充一点，我认为这更多是一个投资回报率（ROI）的问题，而不是成本问题。你想想一个普通工程师的薪水，我们播客前也聊到，工程师非常昂贵。如果你能让一个工程师的生产力提高50%或70%，那价值就非常巨大了。我认为应该从这个角度来思考。

### 主要功能回顾

**发言人: Swix**
我们来回顾一下 Claude Code 的简史吧。从发布到现在，你们推出了一些新功能。你能重点介绍一下主要的功能吗？然后我们再聊聊“思考”工具。

**发言-人: Cat Woo**
我得翻翻你的推特才能全想起来。一个我们收到很多请求的重要功能是网页抓取（web fetch）。我们和法务团队紧密合作，确保我们发布了一个尽可能安全的实现。如果用户直接提供 URL，无论是在 `claude.md` 文件里还是在消息里，或者是在之前抓取的 URL 中提到的 URL，我们才会进行网页抓取。这样，企业可以放心地让他们的开发者继续使用。

我们还发布了一系列“自动”功能，比如自动补全（autocomplete），你可以按 Tab 键补全文件名或路径；自动压缩（auto-compact），这样用户会感觉拥有无限的上下文，因为我们会在后台进行压缩。我们还发布了自动接受（auto-accept），因为我们注意到很多用户会说：“嘿，Claude Code 能搞定，我对它已经建立了很多信任，我希望它能自主地编辑我的文件、运行测试，然后再回来找我。”这些是比较大的功能。还有 Vim 模式，自定义斜杠命令。人们超爱 Vim 模式，那也是一个呼声很高的请求。

**发言人: Swix**
还有最近的记忆功能，用井号（#）来记住内容。

**发言人: Alessio**
我很想从技术角度深入了解一下，有没有哪个功能实现起来特别有挑战性？Aider 的作者 Paul 总是说，他的工具里有多少是由 Aider 自己编写的。所以问题是，Claude Code 里有多少是由 Claude Code 自己编写的？

**发言人: Boris Journey**
显然有一部分是。我想想，比例相当高，可能接近80%。

**发言人: Cat Woo**
不过有大量的人工代码审查。

**发言人: Boris Journey**
是的，大量的人工代码审查。有些东西必须手写，有些代码可以由 Claude 写。知道在什么任务中选择哪种方式、比例如何，这其中有一种智慧。通常我们是先让 Claude 写代码，如果不好，再由人来介入。也有些东西我更喜欢自己动手，比如复杂的数据库模型重构，我不会交给 Claude，因为我有非常强烈的个人见解，自己动手实验比向 Claude 解释要容易。所以总的来说，大概80%到90%的代码是 Claude 写的。

### 自定义命令与 MCP

**发言人: Swix**
我有个问题，关于自定义斜杠命令和 MCP（模型间通信协议），这一切是如何联系在一起的？Claude Code 里的斜杠命令是 MCP 的一种扩展吗？人们构建的东西是不应该成为 MCP，而只是自包含在其中的东西吗？人们应该如何理解这个？

**发言人: Boris Journey**
显然，我们是 MCP 的忠实粉丝。你可以用 MCP 做很多不同的事情，比如自定义工具和命令。但同时，你不应该非用它不可。如果你只是想要一些简单的、本地化的东西，本质上就是一个保存下来的提示词，那就用本地命令。

我们一直在思考的一个问题是，如何以便利的方式重新暴露这些功能。比如，你有一个本地命令，能不能把它重新暴露为一个 MCP 提示词？因为 Claude Code 既是 MCP 客户端也是 MCP 服务器。或者，假设你传入一个自定义的 bash 工具，有没有办法把它重新暴露为一个 MCP 工具？我们认为，总的来说，你不应该被某项特定技术束缚，应该用对你有用的任何东西。

**发言人: Boris Journey**
我再举一个这些东西如何连接的例子。在 Claude Code 的 GitHub 仓库内部，我们有一个 GitHub Action 在运行。这个 GitHub Action 会调用 Claude Code，并使用一个本地的斜杠命令 `/lint`。这个命令就是用 Claude 来运行一个 linter（代码检查器）。它做的事情，用传统的基于静态分析的 linter 来做会很棘手。比如，它会检查拼写错误，也会检查代码和注释是否匹配，还会检查我们是否使用了某个特定的库来进行网络请求，而不是内置的库。有很多这类特定的检查项，用传统的 lint 规则很难表达。理论上你可以去写一堆 lint 规则，有些能覆盖，有些可能不行。但说实话，在一个本地命令的 Markdown 文件里写上一条，然后提交，要容易得多。

所以我们的做法是：Claude 在 GitHub Action 中运行，我们用 `/lint` 调用它。它会运行 linter，识别任何错误，进行代码修改，然后使用 GitHub MCP 服务器将更改提交回 PR。所以你可以把这些工具组合在一起。我认为我们看待 Claude Code 的方式很大程度上就是，它只是生态系统中的一个工具，能够很好地与其他工具组合，而不会对任何特定部分持有强制性意见。

### 技术栈：React Ink 与 Bun

**发言人: Swix**
我简历里有一段奇怪的经历，我曾是 Netlify CLI 的维护者，所以对这方面有点了解。网上有一个 Claude Code 的反编译版本，后来好像被撤下了，但看起来你们用的是 Commander.js 和 React Ink。我很好奇，在某种程度上，你们不只是在构建 Claude Code，而是在构建一个通用的 CLI 框架，任何开发者都可以根据自己的目的进行修改。你有没有想过，这种级别的可配置性更像是一个 CLI 框架，或者一种以前不存在的新形态？

**发言人: Boris Journey**
当然，开发一个很棒的 CLI 是很有趣的，因为这样的 CLI 并不多。我们是 Ink 的忠实粉丝。Vadim Demedes，我们其实在很多项目里都用了他的 React Ink。Ink 很神奇，它在很多方面有点像“黑客”式的、不那么完美的。你有 React，然后渲染器只是把 React 代码翻译成 ANSI 转义码来渲染。有很多东西根本就没法用，因为 ANSI 转义码是上世纪70年代开始写的东西，没有很好的规范，每个终端都有些许不同。所以用这种方式构建，感觉有点像以前为浏览器开发，你得考虑 IE 6、Opera、Firefox 等等。你得经常考虑这些跨终端的差异。但我们是 Ink 的忠实粉丝，因为它帮助我们抽象了这些差异。

我们还用了 Bun，我们是 Bun 的忠实粉丝。它让我们的测试编写和运行快了很多。我们还没有在运行时中使用它，但我们用 Bun 来把代码编译打包在一起。

### 信任、安全与权限系统

**发言人: Alessio**
我想问问关于“自动接受”（auto-accept）这个功能。我对智能体的信任问题有一些思考：什么时候你可以说“好了，自主运行吧”，什么时候需要把开发者拉进来？有时候你让模型决定，有时候你会说“这是一个破坏性操作，必须问我”。我很好奇你们内部有没有关于何时使用自动接受的经验法则，以及这一切的未来走向。

**发言人: Cat Woo**
我们正在花大量时间构建权限系统，我们团队的 Robert 正在领导这项工作。我们认为给开发者控制权非常重要，让他们可以说：“嘿，这些是允许的权限。”通常这包括模型总是被允许读取文件或任何东西。然后由用户来决定，比如“模型将要编辑文件”、“将要运行测试”，这可能是最安全的三个操作。然后还有一长串其他操作，用户可以根据正则表达式匹配来设置白名单或黑名单。

**发言人: Boris Journey**
我认为对于文件编辑，安全性方面的考虑其实少一些，虽然仍然有安全风险。比如，模型抓取一个 URL，URL 里有提示词注入攻击，然后模型把恶意代码写到磁盘上，而你没有意识到。当然，代码审查是另一层保护。但总的来说，对于文件写入，最大的问题是模型可能 просто做错了事。我们发现，如果模型做错了，最好是能尽早发现并纠正，这样体验会更好。如果你等模型走上了一条完全错误的道路，十分钟后再去纠正，那体验会很糟糕。所以通常最好是尽早发现失败。

但同时，有些情况下你就是想让模型自己运行。比如，如果 Claude Code 在为我写测试，我就会按下 `Shift + Tab` 进入自动接受模式，让它运行测试并迭代，直到测试通过。因为我知道这是个很安全的操作。但对于像 bash 工具这样的其他工具，情况就大不相同了。因为 Claude 可能会运行 `rm -rf /`，那后果就不堪设想了。所以我们肯定希望有人在环路中来捕捉这类情况。模型经过训练和对齐，不会去做那种事，但这些都是非确定性系统，所以你还是需要人类在环路中。

### 自动化工作流：从语义化 Linting 到非交互模式

**发言人: Alessio**
我非常想聊聊你提到的 linter 部分。我觉得人们可能第一次听没太注意，但从基于规则的 linting 到语义化的 linting，我认为这非常棒且超级重要。很多公司都在尝试做自主的 PR 审查，但我至今没见过一个我能用的，都挺一般的。所以我很好奇你们如何思考闭环这个问题，或者如何让它变得更好。特别是，你应该审查什么？因为用 AI 写的 PR 会变得非常大。

**发言人: Boris Journey**
我们内部有一些 Claude 做代码审查的实验，但我们对结果还不是很满意，所以暂时还不打算开放。我们看待 Claude Code 的方式是，它是一个基础构建块（primitive）。如果你想用它来构建一个代码审查工具，你可以这么做。如果你想构建一个安全漏洞扫描工具，也可以。如果你想构建一个语义化的 linter，也可以。希望有了 Claude Code，你想做这些事就只需要几行代码，而且你还可以让 Claude 来写那几行代码，因为它非常擅长写 GitHub Actions。

**发言人: Cat Woo**
需要提一下的是，我们有一个非交互模式，这是我们在自动化 Claude Code 的场景下使用的，很多使用 Claude Code 的公司也用这个非交互模式。比如，他们会说：“我的代码库里有几十万个测试，有些已经过时，有些不稳定。”他们就会派 Claude Code 去检查每一个测试，决定如何更新，是否要废弃一些，如何提高代码覆盖率。这是人们以非交互方式使用 Claude Code 的一个很酷的方式。

**发言人: Swix**
这里的最佳实践是什么？因为当它非交互式运行时，它可能会一直运行下去，而且你也不一定能审查每一个输出。我很好奇在非交互模式下有什么不同，最重要的超参数或参数设置是什么？

**发言人: Boris Journey**
对于没用过的朋友，非交互模式就是 `claude -p`，然后在引号里传入提示词，就这么简单。通常，它最适合只读任务，这是它工作得最好的地方，你不用太担心权限和无限运行之类的问题。比如，一个只运行但不修复问题的 linter。或者，我们正在做一个用非交互模式的 Claude 来生成 Claude Code 自己的更新日志（changelog）的东西。每个 PR 都会回顾提交历史，然后决定哪些内容应该进入更新日志。

对于需要写入的任务，我们通常建议在命令行中传入一套非常具体的权限。你可以传入 `--allowed-tools`，然后允许一个特定的工具，比如不只是 `bash`，而是 `git status` 或 `git diff`。你只给它一组它能使用的工具。我们绝对建议你从小处着手，比如先在一个测试上试用，确保它的行为合理，迭代你的提示词，然后扩大到10个，确保成功，或者如果失败了就分析失败模式，然后逐步扩大规模。绝对不要一上来就启动一个修复十万个测试的任务。

### 生产力与代码质量

**发言人: Alessio**
我想象中，在 Anthropic，有 Claude Code 生成代码，然后又有 Claude Code 在审查自己的代码。在某种程度上，这是正在发生的事情。

**发言人: Boris Journey**
在 Anthropic，我们仍然有人类在环路中进行审查。我认为这对于 AI 安全等级（ASL）很重要。随着模型能力越来越强，比如达到 ASL 5 的最高级别，模型可能能够欺骗用户，逃离容器并自我复制。我们现在大概在 ASL 2，正接近 3。到了 3、4、5 级，你就必须更谨慎地思考这个问题了。

**发言人: Alessio**
我想到的是，我们有工程副总裁、CTO 在听。对个人开发者来说，这一切都很好。但对于那些对整个代码库、工程决策负责的人来说，他们的开发者可能在做任何这些事。他们该如何管理？代码审查流程、变更管理流程该如何改变？

**发言人: Cat Woo**
我们和很多副总裁、CTO 聊过，他们通常都相当兴奋。他们会下载工具，自己试验，问几个问题，当 Claude Code 给出合理的答案时，他们会非常激动，因为他们觉得“哦，我能理解代码库里的这个细微之处了”。他们甚至有时会用 Claude Code 来发布一些小功能。通过与工具互动的过程，他们建立了很多信任。很多人会来问我们：“我该如何更广泛地推广它？”

总的来说，保证代码质量仍然取决于每个开发者，他们需要对自己合并的代码保持非常高的标准。即使我们用 Claude Code 写了很多代码，最终合并代码的个人仍然要对代码的可维护性、文档完备性和合理的抽象负责。我认为这种情况会继续下去，Claude Code 不是一个自己提交代码的独立工程师，代码的责任仍然在个人开发者身上。

**发言人: Boris Journey**
Claude Code 也让很多质量相关的工作变得容易多了。比如，我已经好几个月没有手动写过单元测试了，但我们有很多单元测试。因为 Claude 会写所有的测试。以前，如果我在别人的 PR 里说“嘿，能写个测试吗？”，我会觉得自己像个混蛋。因为他们知道自己应该写，但为了更快地发布而做了权衡。但现在我总是要求，因为 Claude 就能写，不需要人来做。随着写测试和写 lint 规则变得更容易，保持高质量代码实际上比以前容易多了。

**发言人: Alessio**
你相信哪些指标？比如很多人不相信100%的代码覆盖率。

**发言人: Cat Woo**
我认为这非常依赖于具体的工程团队，希望有一个万能的答案。对一些团队来说，测试覆盖率极其重要；对另一些团队，类型覆盖率很重要，特别是在强类型语言中。圈复杂度（Cyclomatic complexity）虽然饱受诟病，但说实话，它仍然是一个不错的指标，因为在衡量代码质量方面没有更好的替代品。

**发言人: Boris Journey**
代码行数（lines of code）说实话也没那么糟。它有很多缺点，但很难做出更好的指标，所以它是“最不糟糕”的。

**发言-人: Cat Woo**
我们真正想搞定的两个指标是：一是减少周期时间（cycle time），即你的功能因为使用了这些工具而发布得有多快。另一个我们想更严格衡量的指标是“你本来不会去构建的功能数量”。我们有很多渠道获取客户反馈，我们看到一个模式，就是客户支持或成功团队发帖说“这个应用有这个 bug”，然后十分钟后，那个团队的工程师就会说“Claude Code 已经修复了”。很多时候你问他们，他们会说：“是啊，没有 Claude Code 我可能就不会做了，因为那会偏离我原定的工作太多，最后只会堆积在待办事项里。”这类事情是我们非常想更严格衡量的。

### 记忆、规划与知识库

**发言人: Alessio**
我们来聊聊记忆。我们谈到了自动压缩和用井号标签进行记忆。我的印象是你们喜欢用最简单的方法，但我好奇你们是否看到其他有趣的需求，或者内部有没有人探索出一些你们想分享给大家的记忆使用技巧？

**发言人: Boris Journey**
有很多不同的记忆方法，大多数使用各种外部存储，比如 ChromaDB。有键值对（key-value）或者图（graph）两种主要形式。如果你在我加入这个团队之前问我，我会说我绝对相信知识图谱。但现在，我感觉一切皆模型（everything is the model），这才是最终的赢家。随着模型变得越来越好，它会吞噬其他一切。总有一天，模型会编码自己的知识图谱，编码自己的键值存储，只要你给它正确的工具。

**发言人: Swix**
我们做记忆这些事，是不是只是因为上下文长度不够而在“苟且”？如果我们有了一亿 token 的上下文窗口，我们还会关心这些吗？

**发言人: Boris Journey**
我很想有一亿 token 的上下文。

**发言人: Alessio**
如果把全世界的知识都放进你的大脑，你拥有无限的神经元，你会想要这样做吗？还是你仍然想把知识记录在外部？

**发言人: Swix**
把它放进我的脑子，和用一个智能体工具来做，是不一样的。因为我想控制那个智能体，我想让自己变得无限，但我想让我用的工具有限，这样我才知道如何控制它们。我希望知道你知道什么，如果你不知道某件事，有时候是好事。我希望有能力审计它的意图。

**发言人: Cat Woo**
我们看到人们以很有趣的方式使用记忆，比如让 Claude 写一本记录它所有操作的日志，这样随着时间的推移，Claude 会逐渐了解你的团队做什么、你在团队中做什么、你的目标是什么、你喜欢如何工作。我们很想找出这里面最通用的版本，以便广泛分享。

**发言人: Boris Journey**
一个与记忆相关的问题是如何把东西放进上下文，也就是知识库。最初，非常早期的 Claude 版本确实使用了 RAG（检索增强生成）。我们对代码库进行索引，当时用的是 Voyage，就是现成的 RAG。效果还不错。我们试了几个版本，有 RAG，也试了几种不同的搜索工具，最终我们确定使用智能体搜索（agentic search）的方式。主要有两三个原因。

第一，它的表现远超其他所有方法。这很令人惊讶。

**发言人: Swix**
在什么基准上？

**发言人: Boris Journey**
就是感觉（vibes）。也有一些内部基准，但主要是感觉。就是用常规的代码搜索，比如 `glob`、`grep`。第二，RAG 需要一个索引步骤，这带来了很多复杂性，比如代码会和索引不同步，还有安全问题，因为索引需要存放在某个地方，万一那个提供商被黑了怎么办？对于像我们这样代码库非常敏感的公司来说，这是一种责任。而智能体搜索完全回避了这些问题。本质上，你用延迟和 token 的成本，换来了极好的搜索效果，还没有安全隐患。

### 模型的失败与改进

**发言人: Alessio**
我们来聊聊模型在何时以及如何失败。你观察到 Claude Code 在哪些方面会失败？

**发言人: Cat Woo**
模型肯定还有很大的改进空间，这我觉得非常令人兴奋。我们大部分研究团队每天都在用 Claude Code，所以这是一个很好的方式，让他们能亲身体验模型的失败之处，这使得我们能更容易地在模型训练中针对性地解决这些问题，从而提供更好的模型，不仅是为了 Claude Code，也是为了我们所有的编程客户。

关于最新的 Sonnet 3.5 模型，它是一个非常执着的模型，非常积极地想完成用户的目标。但它有时候会过于字面地理解用户的目标，而没有完成请求中隐含的部分，因为它太专注于“我必须完成X”这件事。所以我们正在想办法，如何给它更多常识，让它知道努力尝试和“用户绝对不想要那个”之间的界限。

**发言-人: Boris Journey**
就像那个经典的例子：“嘿，去让这个测试通过。”然后五分钟后，它说：“好了，我把所有东西都硬编码了，测试通过了。”我：“不，那不是我想要的。”但事情就是这样，它只会变得越来越好。这些用例今天有时能成功，但不是每次都行。模型有时会过于努力，但它只会越来越好。上下文也是一个大问题，比如你有一个很长的对话，压缩几次之后，你最初的意图可能就不那么强烈了，模型可能会忘记你最初让它做的一些事。所以我们对像更大的有效上下文窗口这样的东西感到非常兴奋，这样你就可以处理那些长达数十万 token 的复杂任务，并确保 Claude Code 全程不跑偏。

### 未来展望：商业模式、开源与团队发展

**发言人: Alessio**
你显然没有一个单独的 Claude Code 订阅。我想知道它的路线图是怎样的？它会长期作为一个研究预览版吗？你们会把它变成一个真正的产品吗？你们会推出 Claude Code 企业版吗？愿景是什么？

**发言人: Cat Woo**
我们有一个专门负责 Claude Code 的常设团队，我们正在扩大团队，并且非常兴奋能长期支持 Claude Code。所以，我们会长期存在。

关于订阅模式本身，我们讨论过。这很大程度上取决于大多数用户是更喜欢订阅制还是按量付费。到目前为止，按量付费让人们很容易开始体验产品，因为没有前期承诺。在一个人们更多地用脚本自动化 Claude Code 的更自主的世界里，这也更有意义。但我们也听到了关于“如果这成为我的主力工具，我希望价格更可预测”的担忧。所以我们还在探索阶段。

对于企业，鉴于 Claude Code 更像是一个个人开发者的生产力倍增器，大多数开发者可以直接采用，我们一直在支持企业，回答他们关于安全和生产力监控的问题。

**发言人: Alessio**
对于非 Anthropic 的用户，你们有可靠的生产力提升数据吗？比如30%？

**发言人: Boris Journey**
我们正在努力获取这个数据。但从个人经验来看，它可能让我的生产力翻了一番。我是一个整天都在写代码的工程师，对我来说大概是2倍。我想 Anthropic 有些工程师可能提升了10倍，也有些人还没搞清楚怎么用，只用它来生成 commit message，那可能就提升10%。所以范围可能很大，我们需要更多研究。

**发言人: Alessio**
我必须问，为什么它不开源？

**发言人: Boris Journey**
我们正在研究。

**发言人: Alessio**
好的，所以还没决定。

**发言人: Boris Journey**
这其中有很多权衡。一方面，我们团队很小，如果开源了，我们很欢迎社区贡献，但维护所有东西的工作量很大。我维护过很多开源项目，团队里其他人也是，管理贡献等等工作量巨大，就像一份全职工作。

**发言人: Alessio**
我想指出，你们可以采用源码可用（source available）的方式，这能解决很多个人用户的需求，而不用走完完整开源的法律流程。

**发言人: Boris Journey**
是的。我想说的是，源码里没什么秘密。很明显，它全是 JavaScript，你可以直接反编译。我们的一贯做法是，所有的秘密武器都在模型里。这只是模型之上的一个最薄的包装层。我们真的做不出比这更精简的东西了。

**发言人: Alessio**
最后一个问题，更宏观一点。Anthropic 在 AI 工程，也就是面向开发者和编程模型方面，可以说拥有最好的品牌。现在有了配套的编程工具，它拥有了模型、工具和协议的全套产品。这在一年前并不明显。为什么 Anthropic 在开发者中做得这么好？听起来好像并没有一个中央集权的策略。

**发言人: Cat Woo**
我想这很大程度上源于模型本身就非常擅长代码生成。我们完全是建立在一个不可思议的模型之上的，这是 Claude Code 能够存在的唯一原因。为什么模型本身擅长代码，有很多答案，但一个高层次的原因是，世界的大部分都是由软件驱动的，对优秀软件工程师的需求巨大。而且，这是一个你几乎可以用一台笔记本电脑或开发机就能完成所有工作的领域。所以这是一个非常适合大语言模型的环境，我们觉得在这个领域能解锁巨大的经济价值，有非常直接的投资回报率。

**发言人: Swix**
你提到你们在扩大团队，你们想招聘什么样的人？

**发言-人: Cat Woo**
我们没有特定的画像。如果你对编程和这个领域充满热情，如果你对学习模型如何工作、终端如何工作以及所有这些相关技术感兴趣，就联系我们吧。我们随时乐于交流。

**发言人: Alessio**
太棒了。感谢你们的到来，这次聊得很开心。

**发言人: Boris Journey**
谢谢邀请，很愉快。

**发言人: Cat Woo**
谢谢。
