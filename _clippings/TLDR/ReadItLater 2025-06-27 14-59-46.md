
---

## 摘要

我成功地将我的 Claude Code 定制成了一个 Claude 设计师。这使我可以直接在 Cursor 和 Windsurf 中以 10 倍的速度进行 UI 迭代、分支和同时生成 5 到 10 个不同的 UI。所有这些都是通过一些隐藏的 Claude Code 功能实现的，比如并行任务、命令以及他们刚刚推出的新 SDK。我将为你详细分解，这样你就可以在自己的设备上复制这个流程。

## 使用并行代理（Sub-agents）加速 UI 迭代

我认为有一件事大家没有意识到，那就是你实际上可以通过简单的提示，在 Claude Code 内部启动多个子代理（sub-agents）。

例如，我给出一个简单的提示：

```bash
Start 3 parallel agents to implement variations of to do app UI;
Each agent should make a single html that contain one screen of UI
Save the html as html file in root folder
Each agent should name the file differently
```

然后你会看到它启动了三个不同的任务，这些任务是同时进行的。



一个代理将负责创建**极简风格的待办事项 UI**，另一个负责**现代风格的 UI**，第三个则是**看板风格的 UI**。

轰！你就同时得到了三种完全不同风格的设计。

*   **现代待办事项应用 (Modern Todo)**：一个带有紫色渐变背景的时尚设计。
    

*   **多彩看板待办事项应用 (Colorful Kanban Todo)**：一个功能性的看板，分为“待办 (TO DO)”、“进行中 (IN PROGRESS)”和“完成 (DONE)”三栏。
    

*   **极简待办事项应用 (Minimalist Todo)**：一个干净、简洁的黑白设计。
    

这样迭代起来会快得多。你可以想象，我们可以把这个过程打包成一些非常有趣的 UI 迭代流程。

## 关于多代理架构的讨论

上周在 Twitter 上有一场非常激烈的辩论。

#### Devin 团队的观点：“不要构建多代理”

Devin 团队发布了一篇博文，标题是“不要构建多代理（Don't build Multi-Agents）”。他们发现的关键点之一是，对于像编程这样的任务，你采取的每一个行动都隐含着一系列特定的决策。

当他们尝试并行任务时，很容易导致像合并冲突（merge conflicts）这样的问题，因为每个子代理都不知道其他代理在做什么。

**Devin 团队的“不可靠”并行模型**


他们发现的最佳方法是**根本不进行并行任务**，而是将所有事情都放在一个单一的线程中顺序执行。

**Devin 团队的“可靠”顺序模型**


#### Anthropic 的观点：多代理研究系统

然而，几天后，Anthropic 发布了他们自己的博文，介绍了他们如何在其研究系统中应用多代理。



他们构建了一组代理，其中每个子代理实际上可以并行执行任务，比如进行研究。

**Anthropic 的多代理研究系统架构**


我认为两边都有很有道理的观点。大多数时候，你确实希望确保代理在执行任务时拥有完整的上下文。

但在某些场景下，并行处理是有意义的，比如**研究**。如果你能启动 5 个研究主题并最终汇总所有内容，那速度肯定会更快。同样，对于 **UI 设计**，并行任务也是一个完美的用例。当我们在 Figma 中进行设计时，我们经常会复制（fork）并制作几个不同的变体，然后并排比较它们，最终得到最终版本。因此，拥有并行设计任务的能力一直是一个非常好的模式。

接下来，我将向你展示我是如何利用 Claude Code 中的并行任务能力来实现一些非常有趣的 UI 工作流的。

---

### **赞助商环节：Firecrawl**

在深入探讨之前，我知道你们中的许多人正在构建需要访问互联网数据的 AI 应用或 AI 代理，从研究商业信息到获取最新新闻。将任何网站数据转化为大型语言模型友好的格式，一种智能且可靠的方式至关重要。

这就是为什么我想向你介绍 **Firecrawl**。



他们是第一个提供高效方式将任何网站转化为经过优化的干净格式的开源项目，以便大型语言模型使用。他们处理了所有困难的部分：

*   **抓取（Crawling）**: 即使没有站点地图，也能从所有可访问的子页面收集干净数据。
*   **媒体解析（Media Parsing）**: 可以解析并输出 PDF、DOCX 等托管文件的内容。
*   **智能等待（Smart Wait）** 和 **动态内容（Dynamic Content）**: 处理 JavaScript、单页应用（SPAs）和动态加载的内容。

最近，他们推出了全新的功能，使网络抓取变得更加容易：

*   **/search 端点**: 只需一个 API 调用，就能搜索网络并从结果中提取全部内容。
*   **/extract v2 端点**: 拥有自己的 FIRE-1 代理，可以处理复杂操作，如分页、登录和身份验证。



最重要的是，所有这些功能都可以通过 API 端点直接调用，或者与 Zapier 和 Relevance AI 等自动化平台集成。如果你正在寻找一种智能的方式来抓取互联网数据，我强烈建议你看看 Firecrawl。

---

## “Claude 设计师”的核心概念

要理解我将要展示的工作流程，有四个核心概念：

1.  **子代理 (Sub agents)**
2.  **CLAUDE.md**
3.  **./Commands**
4.  **Git worktree**

我们已经介绍了子代理。现在来看第二个。

### 核心概念 2: CLAUDE.md

`CLAUDE.md` 基本上是 Claude Code 的“Cursor 规则”。通过这个文件，我们可以定制 Claude Code 的行为方式，并告诉它什么类型的任务应该并行处理，什么类型的不应该。

例如，在一个文件夹里，我创建一个名为 `CLAUDE.md` 的文件，并写入以下指令：

```markdown
You are a **senior front-end developer**.
You pay close attention to every pixel, spacing, font, color;
Whenever there are UI implementation task, think deeply of the design style first, and then implement UI bit by bit
You always build UI iteration & experimentation in single html file

## Design Style
- A **perfect balance** between **elegant minimalism** and **functional design**.
...
```

这个文件包含了我定义的角色、设计风格和技术规范。当我给出一个简单的提示，比如“为我构建一个现代的待办事项应用 UI”，它就会遵循这些规则，只创建一个单一、精美的 HTML 文件，而不是一个复杂的项目结构。

### 核心概念 3: ./Commands

这是一个非常强大的功能，可以预定义你希望 Claude 遵循的常见工作流程列表。

你可以在 `.claude` 文件夹下创建一个 `commands` 文件夹。在这里，我们可以创建一些很酷的东西。

例如，创建一个 `joke.md` 命令：

```markdown
Make a joke about $ARGUMENTS
Always end joke with a man eating chips
```

`$ARGUMENTS` 是一个特殊变量，它会传递你在命令后输入的任何内容。现在，在终端中输入 `/joke ai coding`，它就会根据我的模板生成一个关于 AI 编程的笑话，并以“一个男人在吃薯片”结尾。

更进一步，你甚至可以在命令中嵌入 Shell 命令来获取上下文。例如，在生成关于 Git 状态的笑话之前，先运行 `git status`、`git diff` 等命令。



### 将概念结合：UI 迭代工作流

我创建了两个核心命令：

1.  **/ui/extract-design-system**: 这个命令接收一个 UI 截图，分析其颜色、字体、布局等，并生成一个 `design-system.json` 文件。
2.  **/ui/iterate-design**: 这个命令接收 `design-system.json` 文件和一个提示，然后启动多个并行子代理，根据设计系统和提示创建不同的 UI 变体。

通过这种方式，我可以：
1.  从 Dribbble 或 Mobbin 上找到一个我喜欢的 UI 截图。
2.  运行 `/extract-design-system` 命令，传入该截图，生成一个设计规范文件。
3.  运行 `/iterate-design` 命令，引用这个设计规范，并给出新的指令（例如，“基于此设计创建一个暗黑模式”）。
4.  Claude Code 会启动多个并行任务，生成多个不同的暗黑模式版本供我选择。



### 核心概念 4: Git Worktree

目前的工作流只能生成单个 HTML 页面。如果我们想在真实的、复杂的产品代码库（如 Next.js 应用）上进行并行 UI 迭代呢？这就是第四个概念 **Git worktree** 发挥作用的地方。

**Git Worktree** 是 Git 的一个功能，它允许你将多个分支同时检出到不同的目录中。这意味着我们可以为每个并行代理创建一个独立的、沙盒化的工作环境，它们可以在自己的分支上工作，而不会相互干扰。



我创建了一个终极命令：`execute_parallel_agents.md`。这个命令会自动完成整个流程：

*   **步骤 1**: 根据用户请求的数量，自动设置多个 Git worktree。
*   **步骤 2**: 启动多个并行子代理，每个代理都在其各自的 worktree 中执行任务。

当我运行这个命令并给出提示，比如“尝试 3 个版本的 UI，一个呆子风格，一个儿童风格，一个游戏风格”时：

```bash
/execute_parallel_agents try 3 versions of UI, 1 nerdy style, 1 kid style, 1 gaming style
```

Claude Code 会：
1.  创建三个新的 Git worktree（`ui-nerdy-style`, `ui-kid-style`, `ui-gaming-style`）。
2.  在每个 worktree 中安装依赖。
3.  启动三个并行代理，每个代理根据不同的风格指令（呆子、儿童、游戏）修改 UI。

最后，我得到了三个完全不同风格的、可运行的 Next.js 应用，每个都在不同的端口上运行，完全互不干扰。

*   **呆子风格**: 类似于终端的界面。
    
*   **儿童风格**: 色彩鲜艳、充满表情符号和有趣图标。
    
*   **游戏风格**: 带有赛博朋克和霓虹灯效的“任务控制”界面。
    

## Superdesign：将工作流产品化

我和我的朋友 Jack 在周末把这个想法做成了一个项目：**Superdesign**。

我们基本上将 Claude AI SDK 集成到了一个 Cursor 扩展中。你可以在 `superdesign.dev` 上找到它，并一键安装到 Cursor、Windsurf 或 VS Code 中。



安装后，你只需配置你的 Anthropic API 密钥，就可以开始使用了。

它提供了一个左侧聊天、右侧画布的界面。你可以：
1.  给出提示，比如“为我设计一些计算器的线框图”。
2.  Superdesign 会启动并行任务，在右侧的画布上生成多个线框图选项。
3.  选择你喜欢的一个，然后点击“使用反馈进行迭代”。
4.  给出新的反馈，比如“很好，现在基于这个布局构建一个高保真模型”。
5.  它会再次并行生成多个精美的高保真设计。



一旦你满意了，你可以点击“复制提示”，它会把这个设计的完整代码（HTML/CSS）和上下文复制下来，然后你就可以粘贴到 Cursor 或 Claude Code 中，让它在你的实际项目中实现这个组件。

这个项目是开源的，你可以在 GitHub 上找到它并自己尝试。我也会把视频中用到的所有提示都分享到我的社区 **AI Builder Club** 中。这是一个我正在建设的社区，汇集了顶尖的 AI 构建者，我们分享在 AI 编程和构建大型语言模型应用方面的技巧和工作流。

如果你想加入，链接也在下方。感谢观看，我们下次再见！
