好的，大家好。

这是又一期闪电播客（Lightning Pod），我们的嘉宾是来自挪威的 Jo Kristian Bergum。我发音对了吗？

**Jo Kristian Bergum:** 是的，我在挪威，挪威的特隆赫姆，在挪威中部。

**Swyx:** 大家应该了解特隆赫姆的哪些方面呢？

**Jo Kristian Bergum:** 啊，这是个小城市，出行很方便。这里有一所很棒的技术大学。气候嘛，有点糟糕，但冬天特别容易让人专心做事。

**Swyx:** 我还没去过那边，不过我去过附近的 Oredev 会议。今天我们来这里，主要是想听听你对 RAG（检索增强生成）、搜索、向量数据库这些技术的“热辣观点”。你最近在 X 平台上发表了不少相关内容，反响非常好。

# 向量数据库的兴衰

**Swyx:** 那我们就直接切入大家最熟悉你的那个话题吧——你写的那篇关于“向量数据库基础设施类别的兴衰”的文章。你当时为什么会想写这个呢？

**Jo Kristian Bergum:** 好吧。首先，我得稍微回顾一下背景。我在搜索领域有很长的从业经历，大概 20 年了，主要做搜索基础设施，曾在雅虎和挪威特隆赫姆的 Fast Search & Transfer 工作过。

我也研究嵌入（embeddings）和神经搜索等技术。这一切都发生在 ChatGPT 横空出世之前。后来，大概是 2022 年 11 月，OpenAI 发布了一个类似“食谱”的指南，展示了如何通过嵌入技术将 ChatGPT 与用户自己的数据连接起来，也就是所谓的 RAG。

这一下子点燃了很多开发者的热情，他们觉得：“哦，原来可以这样构建搜索，可以这样做 RAG。” 但这也导致了一个不太自然的联系，很多人开始认为 RAG 中的“检索”部分 *必须* 使用向量嵌入和向量数据库。

**Swyx:** （笑）说起来，这里面还有我一点小小的功劳。OpenAI 指南里那个 Chroma 的例子是我写的。而且，我还是 Chroma 的天使投资人，在他们成为向量数据库公司之前就投了。

**Jo Kristian Bergum:** 真的吗？太巧了！我非常欣赏 Chroma 的创始人 Jeff 和 Anton。他们在推广 AI 检索和相关基础设施方面做得非常出色。

接着说，后来就出现了整个向量数据库的热潮。Pinecone 是其中的先驱之一，他们成功地将向量数据库包装成一个全新的基础设施类别。他们的说法基本上是：如果你需要处理嵌入，你就 *必须* 使用向量数据库。

自然而然地，这就演变成：如果你想在 AI 领域做点什么，你就需要一个向量数据库。这就是我写那篇文章的主要动机，我想回顾一下这期间发生了什么，我们现在处于什么阶段，以及我对未来的看法。

**Swyx:** 那你能帮我们概括一下你文章的核心论点吗？确实，这个领域的兴衰非常快。Pinecone 曾经是绝对的主导者，我记得 2023 年整个向量数据库领域融资总额高达 2.3 亿美元，比 MongoDB 整个生命周期的融资额还多。但后来，这个领域似乎又突然“不酷”了，很多人离开了。这到底是怎么回事？

**Jo Kristian Bergum:** 是的，我也不完全理解为什么会突然降温。Pinecone 他们自己也重新调整了定位，回到了更核心的信息传递上，现在更强调面向开发者，而不是之前那种“AI 的记忆体”的说法。

当然，这个领域的竞争也非常激烈。比如 TurboPuffer 也是一个后起之秀，采用了类似的 SaaS 模式，但定价策略不同，也是直接面向开发者。

# 重点：类别消亡，而非公司

**Jo Kristian Bergum:** 但我想强调的是，我在文章里说的不是这些向量数据库 *公司* 要消亡了，而是这个 *独立的向量数据库基础设施类别* 本身正在消亡。

为什么这么说呢？因为向量搜索的能力正在被整合到几乎所有现有的数据库技术中。比如 Postgres 有了 pgvector 扩展，Elasticsearch、Solr、Vespa 这些传统的搜索引擎也都在加入向量搜索功能。

你会看到功能的趋同。Postgres 用户有了 pgvector 后就会困惑：我既然已经在用 Postgres 了，为什么还需要单独再搞一个向量数据库呢？这个“向量数据库”的概念本身受到了挑战。

所以，虽然这些公司拥有很棒的技术，但作为一个独立的、必须存在的类别，它的地位正在减弱。

# 核心：搜索是更自然的抽象

**Jo Kristian Bergum:** 我认为，对于 RAG 这类需要用外部知识增强 AI 的场景来说，*搜索* 是一个更自然的抽象层，而不是硬性规定必须用向量数据库。向量只是实现搜索的一种技术细节。

你可以看看 Windsurf AI 提供的一些工具示例，它们都是围绕搜索的抽象来构建的，比如 `codebase_search` (代码库搜索)、`grep_search` (文本模式搜索)、`search_web` (网页搜索)。

在这种模式下，LLM 可以自己判断应该使用哪种搜索方式来获取信息：是进行一次 grep 搜索，还是语义搜索，或者是关键词搜索，甚至是直接搜索网页。

**Swyx:** 这很有意思。我们之前似乎过于聚焦在向量和密集嵌入上了，现在看来视野需要更开阔。我记得 Chroma 从一开始就更关注广义的“信息检索”，而不仅仅是狭义的 RAG。

**Jo Kristian Bergum:** 是的，大体上这已经成为一种共识了。

# 数据库内 vs. 外部系统

**Swyx:** 那你觉得事务数据库系统和搜索系统应该是同一个系统吗？比如，像 Elasticsearch 这种，通常需要从主数据库复制一份数据过来建立索引。你认为未来会趋向融合吗？

**Jo Kristian Bergum:** 这是个很好的问题。我认为对于很多应用场景，特别是如果你的数据规模不是特别巨大，并且你已经在用像 Postgres 这样的数据库了，那么利用类似 pgvector 这样的扩展，把数据和向量索引放在一起是完全可行的，也是合理的。

但是，如果你正在构建的应用非常依赖搜索质量，甚至你的核心业务就建立在搜索之上，那么我确实认为你应该考虑使用一个专业的、独立的检索或搜索引擎，比如 Elasticsearch、Solr 或者 Vespa。

# 嵌入技术的演进与未来

**Jo Kristian Bergum:** 嵌入技术本身当然非常重要。它让我们能够表示比以往任何时候都更多样化的数据，包括多模态数据（图像、音频等）。但关键在于，嵌入的作用不*仅仅*是做相似度搜索。一个好的搜索系统还需要考虑很多其他信号，比如信息的时效性、来源的权威性等等。

那种认为“只要把整个互联网都转换成嵌入，然后做语义相似度搜索就能构建下一代网络搜索”的想法，是远远不够的。

**Swyx:** 那你对知识图谱（Knowledge Graphs）和 GraphRAG 有什么看法？

**Jo Kristian Bergum:** 嗯，关于 GraphRAG，我认为主要的瓶颈在于如何构建和维护知识图谱本身——也就是那些实体和它们之间的关系。当然，LLM 的出现让从非结构化文本中提取这些三元组变得更容易了。

但我个人不太喜欢把一个概念（比如 GraphRAG）和一种特定的技术（比如必须使用图数据库）强行绑定在一起。实际上，你完全可以用一个强大的搜索引擎来实现图的探索和遍历功能，不一定非要图数据库。

另外，需要认识到的是，随着 LLM 上下文窗口的不断扩大（从 4k 到现在的 1000 万），对于某些简单场景，比如只处理一个 PDF 文件，可能直接把内容塞给 LLM 就行了，根本不需要 RAG。当然，对于更复杂的、需要整合大量知识的场景，检索或搜索仍然是长期有效的方案。

我非常希望看到更多针对特定领域的嵌入模型的创新，就像 Voyage AI 之前在法律、金融、健康等领域所做的那样。我们需要比通用文本模型更懂行的嵌入模型。另外，我也很看好视觉语言模型（VLM）作为嵌入模型的基础，它们能提供更丰富的表示，并且可能避免像 OCR 这样复杂的预处理流程。

不过，提供嵌入 API 的商业模式确实挺难的。你需要平衡计算成本和用户的付费意愿，这可能也是 Voyage AI 最终被 NVIDIA 收购的原因之一吧。现在似乎每家公司都想往价值链的上游走，比如进入企业搜索市场。

**Swyx:** 你看好 PostgresML 这种在数据库内部运行机器学习模型的做法吗？

**Jo Kristian Bergum:** 不，抱歉，我不看好。我倾向于将计算基础设施和存储基础设施分开。它们有不同的扩展特性和成本考量。试图用复杂的 SQL 语句在数据库内部完成模型训练和推理，我认为从开发者体验和系统管理的角度来看都不是最优解。

**Swyx:** 是的，数据库内处理 vs. 外部系统处理，这是一个持续存在的张力。我们 Supabase 的 Cron Jobs 也是外部系统。通常建议把复杂的计算放到离线或批处理中去做。

**Jo Kristian Bergum:** 这确实是一个需要调整思路的地方。我习惯了那种需要严格控制延迟和并发的大规模在线系统。对于调用一个外部 API 需要 300 毫秒才能返回一堆浮点数向量这种事，以前会觉得效率太低。但现在，这种基于 API 的服务确实让开发变得更容易了，我也在学着拥抱这种变化。

**Swyx:** 我说的“离线”主要是指不在用户请求的关键路径上，可以通过批处理完成。

**Jo Kristian Bergum:** 对。总的来说，对于大多数 RAG 应用，一个强大的基线就是经典的 BM25（关键词匹配）。然后你可以尝试混合搜索（结合关键词和向量）。如果你的预算和延迟要求允许，可以再加上一个重排（reranking）层来进一步优化结果。

# 结语与批评

**Swyx:** 关于你那篇文章，你收到的最大的批评或不同的声音是什么？

**Jo Kristian Bergum:** 主要的误解是一些人认为我说“RAG 已死”，因为我判断“向量数据库基础设施类别正在消亡”。但这源于他们把 RAG 和向量数据库强行绑定了。RAG 绝对没有死，用检索或搜索来增强 AI 的能力会长期存在并且非常重要。

**Swyx:** 好的，非常感谢 Jo！

**Jo Kristian Bergum:** 非常感谢你邀请我，Swyx，这次聊得很开心。

**(结束)**
