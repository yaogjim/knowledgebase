好的，大家好。我是 Jerry，LlamaIndex 的联合创始人兼首席执行官。很高兴能来到这里。今天我演讲的主题是：构建能够真正自动化知识工作的 AI 代理。

如今，AI 代理的一大承诺是提高知识工作者的效率。我相信你们都听过这类高层次的商业说法。我在右边粘贴了一堆 B2B SaaS 厂商的截图，比如“提高运营效率”、“通过更多数据做出更好的决策”。但这到底意味着什么？知识工作的自动化难道就只是构建 RAG 聊天机器人吗？如果不是，那么 AI 代理在自动化知识工作方面，需要什么样的技术栈，又能实现哪些用例呢？

对我们来说，许多核心用例和重点领域，基本上都是围绕非结构化数据来自动化知识工作。90% 的企业数据以文档形式存在，无论是 PDF、PPT、Word，还是你稍后会看到的 Excel。过去，人类需要阅读和编写这些类型的文档。比如投资银行家或客户支持人员，他们需要审阅大量的非结构化数据，并利用这些文档来做决策和采取行动。

现在，AI 代理首次能够对海量的非结构化文本进行推理和操作，进行分析、研究、综合洞察，并端到端地执行任务。因此，当我们思考自动化知识工作的用例和代理类型时，它们主要分为两大类：

1.  **辅助型代理 (Assistive Agents)**：这类代理更像标准的聊天界面，帮助人类更快地获取信息。
2.  **自动化代理 (Automation Agents)**：这类代理可以自动化常规任务，可以在后台运行，可能需要较少的人工干预，并能执行那些自动化的日常操作。

要构建辅助型或自动化代理，需要两个主要组成部分：一是**非常好的工具**，二是**非常好的代理架构**。

现在很多人都在思考如何构建优秀的工具，让代理能够与外部世界交互，从而获取相关信息并执行外部操作。而代理架构，无论是通用的推理循环还是更受约束的循环，其核心都是如何通过代理工作流来编码业务逻辑，以帮助完成任务。

在本次演讲中，我们将讨论三个主要方面：

1.  构建一个文档工具箱
2.  代理的设计模式
3.  整合应用：文档代理的实际用例

### 构建文档工具箱

首先是构建一个文档工具箱。当代理与工具交互时，随着大语言模型（LLM）变得越来越强大，我们会看到像 Claude 或 ChatGPT 这样非常通用的前端界面。代理需要访问正确的工具来与外部世界交互，特别是对于海量的非结构化企业数据。它们需要一个合适的工具箱来处理这些数据。这基本上是超越了初级 RAG 的一个泛化概念。RAG 只是检索，然后一次性合成信息。而代理能对你的文档做的，除了检索，还包括基于文件的搜索、操作等等。

我想强调的一点是，要创建这些工具接口，首先你需要一个非常好的预处理层。你需要数据连接器，将数据从你的数据源同步成代理可以访问的格式，比如 SharePoint、Google Drive、S3、Confluence，并且需要同步权限和元数据。你还需要合适的文档解析和提取部分，稍后会详细介绍，但你必须能真正理解文档中的表格、图表等内容。当然，如果你有大量的文档，你需要以某种方式对其进行索引，可以是向量索引、SQL 表索引、图数据库等等。为了确保数据高质量，你需要这一层来处理和结构化你的文档，并暴露正确的工具接口。

关于正确的工具接口，我想定义一个术语，叫作“文档多模态内容平台（Document MCP）服务器”。这同样是对 RAG 概念的泛化。如果 RAG 只是单次的向量检索，那么你需要一套工具来装备 AI 代理，使其能够理解和操作不同类型的文档。这可能包括：

*   **语义搜索**：模糊查找相关数据源。
*   **文件查找**：查找正确的文件元数据。
*   **文件操作**：对文件执行操作。
*   **结构化查询**：查询更结构化的数据库，以获得对已提取数据的聚合洞察。

#### 复杂的文档处理

在构建这类工具箱时，一个首要考虑是**复杂文档**。很多关注我们社交媒体的人都知道，我们经常讨论这个问题。大量的人类知识以非常复杂的 PDF 和其他格式存在，其中包含嵌入的表格、图表、图像、不规则的布局、页眉页脚等。这些内容通常是为人类消费而非机器消费设计的。因此，如果文档处理不当，无论你的 LLM 有多好，它都会失败。

我们可能是最早意识到 LLM 和大型视觉模型（LVM）可以用于文档理解的公司之一。与传统技术（使用手动调整和任务特定的机器学习模型来解析特定类别的文档）相比，LLM 具有更普遍的准确性，你可以利用它来理解和吸收任何类型的复杂文档。当然，现在的基线方法是你可以直接截图一个 PDF 然后喂给 ChatGPT 或 Claude，虽然准确率不是特别高，但算是一个好的开始。

我们发现的一个“秘诀”是，将 LLM 和 LVM 与传统解析技术相结合，并在测试时加入代理式的验证和推理，从而真正获得更高的准确率。我们的云服务提供文档解析功能，这是文档工具箱的核心步骤。我们对不同模型进行了基准测试，包括 Claude 3.5 Sonnet、GPT-4o、Gemini 1.5 Pro，结果表明我们的方法在性能上超越了所有现有的开源和专有解析工具。

#### Excel 功能的增强

有些人可能知道我们最初是一个 RAG 框架。现在我们有一个托管平台，它本质上是一个原生于生成式 AI 的文档工具箱，包含了你在文档上需要做的许多操作，比如文档解析、提取，并利用我刚才提到的能力来解析、提取和索引数据，为所有工具提供支持。

今天我想特别强调一个新发布的功能，就在几小时前我们刚发布了一篇博客文章，那就是**Excel 处理能力**，以补充我们的文档工具箱。大量的知识工作发生在 Microsoft Excel、Google Sheets 等电子表格中，但 LLM 一直未能很好地解决这个问题。如果你看右边的文档，无论是 RAG 还是文本转 CSV 的技术都无法处理，因为它不是一个结构化的二维表格，行和列中有很多空白。

因此，我们构建了一个 Excel 代理，它能够将非标准化的 Excel 电子表格转换成标准化的二维格式，并允许你对非标准化和标准化版本的 Excel 进行代理式问答。这是一个非常酷的功能。它将补充我们的工具箱，提供比传统文档解析、提取和索引更强大的能力，目前已在早期预览中提供。

简单介绍一下它的工作原理：首先，我们对 Excel 电子表格进行结构理解。我们使用了一些强化学习（RL）技术，动态地适应文档的具体格式，并学习工作表的语义地图。通过学习这个语义地图，我们可以将其转化为一组提供给代理的专用工具。从抽象的角度来看，你可以把它想象成一个代理从头开始编写代码。随着 LLM 的进步，这无疑会成为一个性能更高的基准。但在此期间，我们通过提供一组基于语义地图的专用工具来帮助它，使其能够对 Excel 电子表格进行推理。

### 代理设计模式

我们已经讨论了文档工具箱，以及如何让它变得优秀和全面。现在，当你把它接入一个代理时，有哪些不同的代理架构？它们又意味着哪些用例呢？

正如许多自己构建过代理的人所知，代理的编排范围从**更受约束的架构**到**不受约束的架构**。受约束的架构意味着你更明确地定义了控制流程；而不受约束的架构就像一个 ReAct 循环，你给它一套工具让它自己运行。

我们注意到主要有两种用户体验（UX）类别：

1.  **辅助型 UX**：这类体验通常通过聊天界面来呈现信息，帮助用户获取信息或产出某个知识工作单元。它通常是面向聊天的，输入是自然语言，架构稍微不受约束，通常是一个围绕工具集的 ReAct 循环。它既不受约束，又需要更高程度的人工参与。期望是人类能够引导和说服代理，一步步完成任务。这类用例包括对 RAG 聊天机器人的泛化应用。
2.  **自动化 UX**：这类体验的目标是端到端地处理多步骤的常规任务，而不是为人类提供助手或副驾驶。它的架构通常不同，它接收一批输入，可以在后台运行，也可以由用户临时触发。架构更受约束，这很合理，因为如果你想让它端到端运行，就不能让它偏离轨道。通常在每一步的人工干预较少，最后可能有一个批量的审核。输出是结构化的结果、与 API 的集成或批准后的决策。这类用例包括财务数据标准化、数据表提取、发票对账、合同审查等。

我们发现一个正在兴起的模式是，自动化代理可以作为后端。因为它在后台运行，可以进行数据 ETL 和转换。虽然仍然有人工参与，但它主要负责处理和结构化大量数据，并在后台做出决策。而辅助型代理则更多面向前端。因此，自动化代理可以结构化和处理你的数据，并为辅助型代理提供合适的工具接口。

### 整合应用：文档代理用例

我们讨论了构建文档工具箱，也讨论了不同类别的代理架构。现在，我们将它们结合起来，看一些文档代理的真实世界用例，这些例子展示了代理如何真正帮助自动化不同类型的知识工作。

*   **金融尽职调查（自动化 + 辅助）**：这是我们最喜欢的例子之一，它结合了自动化和辅助两种用户体验。我们的一位客户 Carl，他们利用我们的核心能力构建了一个端到端的杠杆收购代理。这需要一个自动化界面来吸收海量的非结构化公开和私人金融数据，包括 Excel、PDF、PPT，通过定制的提取算法和人工审核进行处理。一旦数据被结构化为正确的格式，就会提供一个副驾驶界面，供分析师团队获取洞察并生成报告。
*   **企业搜索（辅助）**：任何企业搜索用例通常都属于辅助型 UX。我们的客户 Semantix 在这个领域做得很好。他们能够定义多个数据集合，连接到不同的数据源，并提供更具任务特定性的专业代理式 RAG 聊天机器人。这基本上是在 RAG 的基础上增加了一个代理推理层，使其能够分解用户查询、进行研究并回答问题。
*   **技术数据表提取（自动化）**：在纯自动化方面，我们看到很多围绕自动化和效率的用例涌现。一个例子是技术数据表的录入。我们正在与一家全球电子公司合作，他们有大量的数据表需要自动处理和审查，而这在过去需要大量的人力。通过创建一个端到端的自动化代理，可以编码解析这类文档的特定业务逻辑，提取正确的信息，与特定规则进行匹配，并将结构化数据输出到 SQL 中。虽然有人工审核环节，但如果能实现端到端自动化，就能将数周的技术文档撰写工作转变为一个自动化的提取界面。

### 总结

总而言之，LlamaIndex 是一个能够通过代理式 AI 来自动化你的文档工作流的平台，它具有最高的准确性和可定制性。我们的使命在过去几年中有所演变，从一个专注于 RAG 的广泛水平框架，发展到今天这个更专注的领域。

如果您对我们提到的功能感兴趣，欢迎来与我们交流。请到 G11 展位找我们。谢谢！
