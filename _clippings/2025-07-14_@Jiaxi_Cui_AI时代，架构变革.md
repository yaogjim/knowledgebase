---
title: "AI时代，架构变革"
source: "https://x.com/Jiaxi_Cui/status/1944466037841543447"
author:
  - "[[@Jiaxi_Cui]]"
created: 2025-07-14
description:
tags:
  - "@Jiaxi_Cui #AI #代码生成 #后端架构 #微服务 #事件驱动 #AI代码质控"
---
**Panda** @Jiaxi\_Cui [2025-07-13](https://x.com/Jiaxi_Cui/status/1944466037841543447/history)

又把Claude Code额度用完了，深度使用20天后，聊聊我的一些判断和看法：  
  
最直观的感受是AI 时代，写代码的事越来越简单。以前我们还会追求elegant，对一个项目不停重构以达到性能极致，但这些古法时代的操作都比不上AI的「快」，实现够快，可以不断尝试，找出够用的版本即可。  
  
代码变简单了，但写架构却更关键了。下面聊聊我对「新一代后端架构」的 几个判断：  
  
——————————————————  
  
1\. 类微服务的架构（先起个名叫AI-native架构吧）可能是最适合AI时代的架构  
  
一句话概括可能是：统一“平台底座” + 按“场景能力”拆出的可插拔模块 + 事件驱动粘合  
  
可能有点像黑话了，解释一下就是：  
  
(1)把基础服务打成镜像，用 K8s 统一管理。  
  
MySQL、MongoDB、消息队列、监控统统封进各自 Docker 镜像，用 K8s 管理。需要扩就 kubectl scale或者直接通过replica调整节点数量和配置参数，这样服务器上只留一份份的yaml文件  
  
(2)把业务逻辑拆成微服务组件  
  
按收款、用户、通知、风控等「功能」划分出业务逻辑的边界，做成可插拔的模块  
  
每个边界 = 一个 Repo + 一个容器 + 一个 Service。如果性能或协作顶不住，再拆。避免奈米服务地狱。  
  
(3)事件驱动，接口先行  
  
API 先写成 OpenAPI / gRPC，放在某个中央仓库。  
  
能事件驱动就别同步调用，模块通过事件协作，遵循「谁关心谁订阅」的原则。这样改一个模块，别的模块不会跟着炸。  
  
——————————————————  
  
2\. AI-native的架构应该多一个功能模块：自动护栏/AI 代码质控  
  
理想的状况可能是：AI生成的代码应该先过护栏，再配上CI/CD做单元测试/漏洞扫描/参数泄漏扫描等等，采用类似金丝雀发布的方案上线，发现问题即时自动回滚。但还没看到很好的实现方案，我也还没有碰到类似场景  
  
——————————————————  
  
3\. 团队文化要改变  
  
以前是dev写码，ops上线，或者干脆直接是devops。  
  
现在团队应该变成：少量高价值工程师 + AI，工程师定规则，AI实现，CI/CD自动上线  
  
我认为以后的工程师应该就两个任务：定规则 + 维护AI代码护栏  
  
——————————————————  
  
4\. 现在开发项目应该怎么做？  
  
我现在会先梳理逻辑：这个架构是什么，应该有哪些功能，每一个功能的输入输出、状态码、如何测试效果、API长什么样、每一步的目的是什么，还要设置好功能之间的边界在哪里。  
  
整理出一份详细的功能文档.md，然后让Claude Code按照这个功能文档.md去一步步往下执行，在项目还不是太复杂的情况下往往能表现很不错。  
  
如果是老项目，还有希望拯救的话就尝试拆分模块出来，但不要拆太细，因为冗杂的屎山逻辑AI也捋不清的。  
  
完成转型最好的方式永远是另起炉灶而不是修修补补。

大厂不会让现有员工都去认真完成AI化，只会起新的AI化部门，让新部门慢慢替代老部门的作用，然后把老人裁掉

![Image](https://pbs.twimg.com/media/GvwXqQ3bsAALDyl?format=jpg&name=large)
